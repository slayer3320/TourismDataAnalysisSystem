{% extends 'base.html' %}
{% block title %}
    推荐页面
{% endblock %}

{% block sidebar %}
  {{ block.super }}
{% endblock %}

{% block content %}
      <div class="pagetitle" style="display: flex;align-items: center">
      <div style="margin-right: auto">
          <h1>景点推荐</h1>
        <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="{% url 'home' %}">数据可视化</a></li>
          <li class="breadcrumb-item active">景点推荐</li>
        </ol>
      </nav>
      </div>
        <h5 style="font-weight: normal">
            {{ nowTime.year }} - {{ nowTime.mon }} - {{ nowTime.day }}
        </h5>
    </div>

    <section class="section dashboard">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">筛选条件</h5>
          <form method="get" class="row g-3">
            <div class="col-md-4">
              <label for="region" class="form-label">地区</label>
              <select id="region" name="region" class="form-select">
                <option value="">全部地区</option>
                {% for city in cityList %}
                <option value="{{ city }}" {% if filter_params.region == city %}selected{% endif %}>{{ city }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="col-md-4">
              <label for="min_price" class="form-label">最低价格</label>
              <input type="number" class="form-control" id="min_price" name="min_price" 
                     placeholder="0" value="{{ filter_params.min_price }}">
            </div>
            <div class="col-md-4">
              <label for="max_price" class="form-label">最高价格</label>
              <input type="number" class="form-control" id="max_price" name="max_price" 
                     placeholder="不限" value="{{ filter_params.max_price }}">
            </div>
            <div class="text-center">
              <button type="submit" class="btn btn-primary">筛选</button>
              <a href="{% url 'recommendation' %}" class="btn btn-secondary">重置</a>
            </div>
          </form>
        </div>
      </div>

      {% if filter_params.region or filter_params.min_price or filter_params.max_price %}
      <div class="alert alert-info">
        当前筛选条件: 
        {% if filter_params.region %}地区: {{ filter_params.region }}{% endif %}
        {% if filter_params.min_price %} 最低价格: {{ filter_params.min_price }}元{% endif %}
        {% if filter_params.max_price %} 最高价格: {{ filter_params.max_price }}元{% endif %}
      </div>
      {% endif %}

            <div class="row">
                {% for i in resultDataList %}
                     <div class="col-lg-4">
                                  <div class="card">
                                        <div class="card-body">
                                          <h5 class="card-title">{{ i.title }}</h5>
                                            <a href="{{ i.detailUrl }}">
                                                                <img style="width:80%" src="{{ i.cover }}" alt="">

                                            </a>


                                            <div style="margin:7px 0">
                                                评分：<span class="badge bg-primary">{{ i.score }}分</span>
                                            </div>

                                            <div style="margin:7px 0">
                                                等级：<span class="" style="color: #f60">{{ i.level }}</span>
                                            </div>


                                            <div style="margin:7px 0">
                                                价格：<span class="" style="color:#008c8c">${{ i.price }}元</span>
                                             </div>
                                            <div style="margin:7px 0">
                                                详情地址：<span class="" >{{ i.detailAddress }}</span>
                                            </div>
                                            <div style="margin:7px 0">
                                                {% for img in i.img_list %}
                                                    <img style="width:20%;border:2px solid #ccc;padding:5px;margin-right:5px;margin-bottom: 5px" src="{{ img }}" alt="">
                                                {% endfor %}
                                            </div>
                                        </div>
                                  </div>
                    </div>
               {% endfor %}
        </div>

            </section>


{% endblock %}

{% block echarts%}
    <script>

    </script>
{% endblock %}
